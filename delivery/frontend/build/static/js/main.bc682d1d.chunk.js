(this.webpackJsonpclup=this.webpackJsonpclup||[]).push([[0],{135:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),o=s(12),a=s.n(o),i=(s(72),s(73),s(74),s(168)),l=s(11),r=(s(75),s.p+"static/media/LoginPageClupLogo.13974f22.png"),d=s(24),u=s(4),j=s(17),h=s(43),b=s.n(h),p="http://localhost:8081/SSW-1.0-SNAPSHOT/api/SSW",m="http://localhost:8089/QSW-1.0-SNAPSHOT/api/QSW",x="http://localhost:8082/AMW-1.0-SNAPSHOT/api/AMW",O="login_access_token";s(93);var f=function(e){if(null!=e){var t=document.createElement("div");t.classList.add("errorBackground"),t.id="error";var s=document.createElement("div");s.classList.add("flexColumnCenter"),s.classList.add("error");var n=document.createElement("h3");n.innerHTML="ERROR!";var c=document.createElement("h3");c.innerHTML="STATUS CODE: "+e.status;var o=document.createElement("h3");o.innerHTML="ERROR MESSAGE: "+e.data;var a=document.createElement("button");a.innerHTML="Go to Login";a.addEventListener("click",(function(){window.location.href="/"}));var i=document.createElement("button");i.innerHTML="Close";i.addEventListener("click",(function(){document.getElementById("App").removeChild(document.getElementById("error"))})),s.appendChild(n),s.appendChild(c),s.appendChild(o),s.appendChild(a),s.appendChild(i),t.appendChild(s),document.getElementById("App").appendChild(t)}},v={accept:"application/json","Content-Type":"application/json"},g={accept:"application/json"},C="username",N=function(){return localStorage.getItem(O)},k=function(e){localStorage.setItem(O,e)},S=function(){return localStorage.getItem(C)},T=function(e,t){localStorage.setItem(C,e),localStorage.setItem("isManager",t)},y=function(e,t,s,n,c,o,a,i,l,r){console.log("############################################"),console.log("ASYNC HTTP REQUEST:");var d,j={headers:Object(u.a)(Object(u.a)({},n),v)};i&&(console.log("old session-token: "+N()+" ."),j.headers["session-token"]=N()),r&&(console.log("username: "+S()),j.headers.username=S()),d="AMW"===e?x:"QSW"===e?m:p,d+=t,console.log("POST"),console.log(d),console.log(s),console.log(j.headers),console.log("useOldSessionToken: "+i),console.log("setNewSessionToken: "+l),console.log("useUsername: "+r),console.log("--------------------------------------------"),console.log("HTTP RESPONSE:"),b.a.post(d,s,j).then((function(e){console.log("response data:"),console.log(e.data),console.log("response status:"),console.log(e.status),console.log("response headers"),console.log(e.headers),200===e.status?(l&&(console.log("new session-token: "+e.headers["session-token"]+" ."),k(e.headers["session-token"])),c(e)):f(e)})).catch((function(e){console.log(e),e.response?(console.log("error data:"),console.log(e.response.data),console.log("error status:"),console.log(e.response.status),console.log("error headers"),console.log(e.response.headers),null!==o&&500===e.response.status?o(e):f(e.response)):null!==a?a(e):f(e.response)}))},w=function(e,t,s,n,c,o,a,i,l){console.log("############################################"),console.log("ASYNC HTTP REQUEST:");var r,d={headers:Object(u.a)(Object(u.a)({},s),g)};a&&(d.headers["session-token"]=N()),l&&(d.headers.username=S()),r="AMW"===e?x:"QSW"===e?m:p,r+=t,console.log("GET"),console.log(r),console.log(d.headers),console.log("useOldSessionToken: "+a),console.log("setNewSessionToken: "+i),console.log("useUsername: "+l),console.log("--------------------------------------------"),console.log("HTTP RESPONSE:"),b.a.get(r,d).then((function(e){console.log("response data:"),console.log(e.data),console.log("response status:"),console.log(e.status),console.log("response headers"),console.log(e.headers),200===e.status?(i&&(console.log("new session-token: "+e.headers["session-token"]+" ."),k(e.headers["session-token"])),n(e)):f(e)})).catch((function(e){console.log(e),e.response?(console.log("error data:"),console.log(e.response.data),console.log("error status:"),console.log(e.response.status),console.log("error headers"),console.log(e.response.headers),null!==c&&500===e.response.status?c(e):f(e.response)):null!==o?o(e):f(e.response)}))},E=s(14),L=s(1),I=function(e){var t=Object(n.useState)({username:"",password:""}),s=Object(l.a)(t,2),c=s[0],o=s[1],a=Object(E.f)(),i=function(e){var t=e.target,s=t.id,n=t.value;o((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},s,n))}))},r=function(){if(0!==c.username.length&&0!==c.password.length){var e={username:c.username,password:c.password};y("AMW","/login",e,{},(function(e){T(e.data.username,e.data.isManager),console.log("username setted in local storage: "+e.data.username),e.data.isManager?b():h()}),null,null,!1,!0,!1)}},h=function(){a.push("/Home")},b=function(){a.push("/HomeManager")};return Object(L.jsx)("div",{className:"loginFormContainer",children:e.open?Object(L.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.target.reportValidity()&&r()},autoComplete:"off",children:[Object(L.jsxs)("div",{className:"inputContainer",children:[Object(L.jsx)("h3",{children:"Login to your account"}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("label",{className:"labelSignup",children:"Username"}),Object(L.jsx)("input",{onChange:i,value:c.username,id:"username",type:"text",placeholder:"Username",name:"username",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("label",{className:"labelSignup",children:"Password"}),Object(L.jsx)("input",{onChange:i,id:"password",value:c.password,type:"password",placeholder:"Password",name:"password",required:!0})]}),Object(L.jsx)("button",{className:"activeButton",type:"submit",children:"Confirm"})]}),Object(L.jsx)("div",{className:"forgotPasswordContainer",children:Object(L.jsxs)("span",{children:["Forgot ",Object(L.jsx)(j.b,{to:"/",children:"password?"})]})})]}):Object(L.jsx)("form",{method:"post",autoComplete:"off",children:Object(L.jsxs)("div",{className:"inputContainer",children:[Object(L.jsx)("h3",{children:" Already have an account?"}),Object(L.jsx)("button",{className:"activeButton",onClick:e.renderLogin,children:"Login"})]})})})},M=function(e){var t=Object(n.useState)({nextBool:!1,username:"",password:"",repeatPassword:"",email:"",phonenumber:"",shopOwner:!1,credentialError:null}),s=Object(l.a)(t,2),c=s[0],o=s[1],a=Object(E.f)(),i=function(e){var t=e.target,s=t.id,n=t.value;o((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},s,n))}))},r=function(){var e={username:c.username,password:c.password,password2:c.repeatPassword,email:c.email,phoneNumber:c.phonenumber,isManager:c.shopOwner};y("AMW","/registration",e,{},(function(e){T(e.data.username,e.data.isManager),console.log("username setted in local storage: "+e.data.username),e.data.isManager?h():j()}),null,null,!1,!0,!1)},j=function(){a.push("/Home")},h=function(){a.push("/HomeManager")};return Object(L.jsx)("div",{className:"loginFormContainer",children:e.open?Object(L.jsx)("form",{onSubmit:function(e){e.preventDefault(),!0===c.nextBool&&document.getElementById("signupForm").reportValidity()&&(c.password===c.repeatPassword?r():alert("password do not match!"))},id:"signupForm",autoComplete:"off",children:c.nextBool?Object(L.jsxs)("div",{className:"inputContainer",children:[Object(L.jsx)("h3",{children:"Create a password"}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("label",{className:"labelSignup",children:"Password"}),Object(L.jsx)("input",{onChange:i,value:c.password,id:"password",type:"password",placeholder:"Password",name:"password",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("label",{className:"labelSignup",children:"Repeat password"}),Object(L.jsx)("input",{onChange:i,value:c.repeatPassword,id:"repeatPassword",type:"password",placeholder:"Repeat password",name:"repeatPassword",required:!0})]}),Object(L.jsxs)("div",{className:"flexRowCenter",children:[Object(L.jsx)("button",{className:"activeButton",type:"submit",onClick:function(){o((function(e){return Object(u.a)(Object(u.a)({},e),{},{nextBool:!1})}))},children:" Back "}),Object(L.jsx)("button",{className:"activeButton",children:"Confirm"})]})]}):Object(L.jsxs)("div",{className:"inputContainer",children:[Object(L.jsx)("h3",{children:"Create a new account"}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("label",{className:"labelSignup",children:"Username"}),Object(L.jsx)("input",{onChange:i,value:c.username,id:"username",type:"text",placeholder:"Username",name:"username",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("label",{className:"labelSignup",children:"Email"}),Object(L.jsx)("input",{onChange:i,value:c.email,id:"email",type:"email",placeholder:"email@example.com",name:"email",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("label",{className:"labelSignup",children:"Phone number"}),Object(L.jsx)("input",{onChange:i,value:c.phonenumber,id:"phonenumber",type:"number",placeholder:"+39 0123456789",name:"phoneNumber",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("label",{className:"labelSignup",children:"Are you a shop owner?"}),Object(L.jsx)("input",{onChange:function(e){var t=e.target,s=t.id,n=t.checked;console.log(n),o((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},s,n))}))},value:c.shopOwner,id:"shopOwner",type:"checkbox",name:"shopOwner"})]}),Object(L.jsx)("button",{className:"activeButton",onClick:function(e){document.getElementById("signupForm").reportValidity()&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{nextBool:!0})}))},children:"Next"})]})}):Object(L.jsxs)("form",{id:"signupForm",autoComplete:"off",children:[Object(L.jsx)("h3",{children:" Don't have an account?"}),Object(L.jsx)("button",{className:"activeButton",onClick:e.renderSignup,children:"Signup"})]})})},D=function(){var e=Object(n.useState)("login"),t=Object(l.a)(e,2),s=t[0],c=t[1];return Object(L.jsxs)("div",{className:"appContainer",children:[Object(L.jsxs)("div",{className:"topContainer ".concat("login"===s?"topContainerOpen":"topContainerClosed"),children:[Object(L.jsx)("div",{className:"clupLogoContainer",children:Object(L.jsx)("img",{src:r,alt:""})}),Object(L.jsx)(I,{open:"login"===s,renderLogin:function(){c("login")}})]}),Object(L.jsx)("div",{className:"bottomContainer ".concat("login"===s?"bottomContainerClosed":"bottomContainerOpen"),children:Object(L.jsx)(M,{open:"login"!==s,renderSignup:function(){c("signup")}})})]})},B=function(){var e=Object(E.f)();return Object(L.jsxs)("div",{className:"searchSectionContainer flexColumnCenter",children:[Object(L.jsx)("h3",{children:" Where do you want to go? "}),Object(L.jsx)("button",{onClick:function(){e.push("/Search")},className:"smallButton",children:"Search a shop"})]})},W=function(e){var t=Object(E.f)();return console.log(e.ticket),Object(L.jsxs)("div",{className:"flexColumnCenter card "+e.ticket.status,children:[Object(L.jsxs)("div",{children:["TICKET (ID ",e.ticket.id,") ",e.ticket.status]}),e.showShop?Object(L.jsxs)("div",{className:"bold",children:[" ",e.ticket.shop.name," "]}):"",Object(L.jsx)("div",{children:Object(L.jsxs)("div",{className:"flexColumnCenter",children:[e.ticket.scheduledEnteringTime?Object(L.jsxs)("div",{className:"flexRowCenter",children:[" ",Object(L.jsx)("div",{className:"bold spaceLeft",children:"start"})," ",e.ticket.scheduledEnteringTime," "]}):"",e.ticket.scheduledExitingTime?Object(L.jsxs)("div",{className:"flexRowCenter",children:[Object(L.jsx)("div",{className:"bold spaceLeft",children:"expected end"})," ",e.ticket.scheduledExitingTime," "]}):"",e.ticket.enterTime?Object(L.jsxs)("div",{children:[" ",Object(L.jsx)("br",{})," actual enter time: ",e.ticket.enterTime," "]}):"",e.ticket.exitTime?Object(L.jsxs)("div",{children:[" actual exit time: ",e.ticket.exitTime," "]}):""]})}),e.showShop?Object(L.jsxs)("div",{className:"flexRowCenter",children:[Object(L.jsx)("button",{onClick:function(){t.push("/Ticket/"+e.ticket.id)},className:"smallButton",children:"Ticket info"}),Object(L.jsx)("div",{children:"or"}),Object(L.jsx)("button",{onClick:function(){t.push("/Shop/"+e.ticket.shop.id)},className:"smallButton",children:"Shop info"})]}):Object(L.jsx)("div",{className:"flexRowCenter",children:Object(L.jsx)("button",{onClick:function(){w("QSW","/scanTicket/"+e.ticket.id,{},(function(e){alert("please reload page to see the changes !")}),null,null,!0,!1,!0)},className:"smallButton",children:" Scan ticket "})})]})},q=s(18),A=function(e){return e.isLoaded?Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("div",{className:"bold yourTicketTitle",children:"YOUR TICKETS:"}),Object(L.jsxs)("div",{class:"tooltip",children:["info",Object(L.jsxs)("span",{class:"tooltiptext",children:["In this section you can see all your tickets ",Object(L.jsx)("br",{}),"Each ticket contains the following informations: ",Object(L.jsx)("br",{}),"- name of the shop the ticket is enqueued to ",Object(L.jsx)("br",{}),"- ticket id and status (also the color of the border is based on the status) ",Object(L.jsx)("br",{}),"- start the starting time to scan the ticket to enter the shop",Object(L.jsx)("br",{}),"- expected end: the expected time you'll scan the ticket to exit the shop",Object(L.jsx)("br",{}),"- if available the time you scanned the ticket to enter the shop ",Object(L.jsx)("br",{}),"- if available the time you scanned the ticket to exit the shop ",Object(L.jsx)("br",{}),"- two buttons to check more informations about the ticket or about the shop ",Object(L.jsx)("br",{})]})]}),null!==e.tickets&&0!==e.tickets.length?e.tickets.map((function(e){return Object(L.jsx)(W,{ticket:e,showShop:!0},e.id)})):Object(L.jsx)("div",{children:"You have no tickets."})]}):Object(L.jsxs)("div",{className:"flexColumnCenter",children:[" ",Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}})]})},P=s.p+"static/media/account.7c160289.svg",H=function(e){var t=Object(E.f)(),s=Object(n.useState)(!1),c=Object(l.a)(s,2),o=c[0],a=c[1],i=function(){a(!o)};return Object(L.jsx)("div",{className:"flexColumnCenter",children:o?Object(L.jsxs)("div",{className:"accountInfoContainer flexColumnCenter card",children:[Object(L.jsx)("div",{className:"bold",children:" Account info: "}),e.isLoaded?Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{children:[" Username: ",e.account.username," "]}),Object(L.jsxs)("div",{children:[" Email: ",e.account.email," "]}),e.account.isManager?Object(L.jsx)("div",{children:"You are a manager"}):""]}):Object(L.jsxs)("div",{className:"flexColumnCenter",children:[" ",Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}})]}),Object(L.jsxs)("div",{className:"flexRowCenter",children:[Object(L.jsx)("button",{className:"smallButton",onClick:function(){w("AMW","/logout",{},(function(){localStorage.removeItem(O),t.push("/")}),null,null,!1,!1,!0)},children:" Logout "}),Object(L.jsx)("button",{className:"smallButton",onClick:i,children:" close "})]})]}):Object(L.jsx)("div",{children:Object(L.jsx)("button",{className:"accountButton",onClick:i,children:Object(L.jsx)("img",{className:"accountIcon",src:P,alt:"Account"})})})})},R=function(){var e=Object(n.useState)({isLoadedTickets:!1,isLoadedAccount:!1,tickets:null,account:null}),t=Object(l.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){w("SSW","/tickets",{},(function(e){c((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedTickets:!0,tickets:e.data})}))}),null,null,!0,!1,!0)}),[]),Object(n.useEffect)((function(){w("AMW","/userinfo",{},(function(e){c((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedAccount:!0,account:e.data})}))}),null,null,!0,!1,!0)}),[]),Object(L.jsxs)("div",{children:[Object(L.jsx)(H,{isLoaded:s.isLoadedAccount,account:s.account}),Object(L.jsx)(B,{}),Object(L.jsx)(A,{isLoaded:s.isLoadedTickets,tickets:s.tickets})]})},F=function(){var e=Object(E.f)();return Object(L.jsx)("button",{className:"navigationButton",onClick:function(){e.goBack()},children:" Go back "})},Q=function(){var e=Object(E.f)();return Object(L.jsx)("button",{className:"navigationButton",onClick:function(){"true"===localStorage.getItem("isManager")?e.push("/HomeManager"):e.push("/Home")},children:" Home "})},U=function(e){return Object(L.jsxs)("div",{className:"navContainer",children:[e.goBack?Object(L.jsx)(F,{}):"",e.goHome?Object(L.jsx)(Q,{}):""]})},G=s(169),Y=s(170),J=function(){var e=Object(E.f)(),t=function(e){e.preventDefault(),alert("function not availble...")};return Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)(U,{goBack:!0,goHome:!1}),Object(L.jsxs)("div",{class:"tooltip",children:["info",Object(L.jsxs)("span",{class:"tooltiptext",children:["In this section you can search for a shop.",Object(L.jsx)("br",{}),"Currently the prototype does not allow the users to search for a specific shop or to check the nearby ones, but only to retrieve all the shops in the database."]})]}),Object(L.jsxs)("div",{className:"width80 flexRowCenter",children:[Object(L.jsx)(G.a,{id:"standard-basic",label:"Search a shop",fullWidth:!0}),Object(L.jsx)(Y.a,{onClick:t,size:"medium",disabled:!0,variant:"contained",color:"secondary",children:"Search"})]}),Object(L.jsx)("div",{className:"width80 topSpace",children:Object(L.jsx)(Y.a,{onClick:t,size:"medium",disabled:!0,variant:"contained",color:"secondary",children:"Nearby"})}),Object(L.jsx)("div",{className:"width80 topSpace",children:Object(L.jsx)(Y.a,{onClick:function(){e.push("/Shops")},size:"medium",variant:"contained",color:"secondary",children:"All shops"})})]})},K=s.p+"static/media/shop.4e4a89bf.png",V=function(e){var t=Object(E.f)();return Object(L.jsx)("div",{className:"flexColumnCenter card",children:Object(L.jsxs)("div",{className:"flexRowCenter",children:[Object(L.jsx)("div",{children:Object(L.jsx)("img",{className:"shopImg",src:K,alt:"Account"})}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsxs)("div",{className:"bold",children:[" ",e.shop.name," "]}),Object(L.jsx)("button",{className:"smallButton",onClick:function(){t.push("/Shop/"+e.shop.id)},children:"More info"}),Object(L.jsxs)("div",{children:[" ",e.shop.position," "]})]})]})})},z=function(e){return e.isLoaded?Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("div",{className:"bold yourTicketTitle",children:"ALL SHOPS:"}),Object(L.jsxs)("div",{class:"tooltip",children:["Info",Object(L.jsxs)("span",{class:"tooltiptext",children:["Here are listed all the shops in the database. ",Object(L.jsx)("br",{}),"For each shop you can see the shop name, the shop position, and a more info button to check all the informations about the shop."]})]}),null!==e.shops&&0!==e.shops.length?e.shops.map((function(e){return Object(L.jsx)(V,{shop:e},e.id)})):"There are no shops."]}):Object(L.jsxs)("div",{className:"flexColumnCenter",children:[" ",Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}})]})},X=function(){var e=Object(n.useState)({isLoadedShops:!1,isLoadedAccount:!1,shops:null,account:null}),t=Object(l.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){w("SSW","/AllShops",{},(function(e){c((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedShops:!0,shops:e.data})}))}),null,null,!0,!1,!0)}),[]),Object(n.useEffect)((function(){w("AMW","/userinfo",{},(function(e){c((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedAccount:!0,account:e.data})}))}),null,null,!0,!1,!0)}),[]),Object(L.jsxs)("div",{children:[Object(L.jsx)(H,{isLoaded:s.isLoadedAccount,account:s.account}),Object(L.jsx)("div",{className:"flexRowCenter",children:Object(L.jsx)(U,{goBack:!0,goHome:!0})}),Object(L.jsx)(B,{}),Object(L.jsx)(z,{isLoaded:s.isLoadedShops,shops:s.shops})]})},_=function(e){return Math.ceil(Date.parse(e)/1e3/60)},Z=function(e){var t=e.toString(),s="";return t.contains("1")&&(s+="Monday; "),t.contains("2")&&(s+="Tuesday; "),t.contains("3")&&(s+="Wednesday; "),t.contains("4")&&(s+="Thursday; "),t.contains("5")&&(s+="Friday; "),t.contains("6")&&(s+="Saturday; "),t.contains("7")&&(s+="Sunday; "),t.contains("0")&&(s+="Every Day of the Week;"),s},$=function(e){var t=Object(E.f)();return Object(L.jsxs)("button",{onClick:function(){t.push(e.to)},children:[" ",e.content," "]})},ee=function(e){var t=Object(n.useState)({isLoadedShop:!1,shop:null,isLoadedQueueMaxDuration:!1,queueMaxDuration:null,shopId:e.match.params.id}),s=Object(l.a)(t,2),c=s[0],o=s[1];return Object(n.useEffect)((function(){w("SSW","/shopDetail/"+c.shopId,{},(function(e){o((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedShop:!0,shop:e.data.shop})}))}),null,null,!0,!1,!0)}),[c.shopId]),Object(n.useEffect)((function(){w("QSW","/queueInfo/"+c.shopId,{},(function(e){o((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedQueueMaxDuration:!0,queueMaxDuration:e.data})}))}),null,null,!0,!1,!0)}),[c.shopId]),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)(U,{goBack:!0,goHome:!0}),Object(L.jsxs)("div",{class:"tooltip",children:["Info",Object(L.jsxs)("span",{class:"tooltiptext",children:["This is the page of a shop. ",Object(L.jsx)("br",{}),"This page contains: ",Object(L.jsx)("br",{}),"- shop name ",Object(L.jsx)("br",{}),"- shop description ",Object(L.jsx)("br",{}),"- shop position ",Object(L.jsx)("br",{}),"- the expected queue duration field represents the maximum awiting time you can have by enqueuing in this moment ",Object(L.jsx)("br",{}),"- the enqueue button"]})]}),c.isLoadedShop?Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsxs)("div",{className:"flexColumnCenter card",children:[Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsxs)("div",{className:"bold",children:[" ",c.shop.name," "]}),Object(L.jsxs)("div",{children:[" description: ",c.shop.description," "]}),Object(L.jsxs)("div",{children:[" position: ",c.shop.position," "]})]}),Object(L.jsx)("div",{className:"flexColumnCenter",children:c.isLoadedQueueMaxDuration?Object(L.jsxs)("div",{className:"littleMargin",children:[" ",Object(L.jsx)("div",{className:"bold",children:" Expected Queue duration "})," ",c.queueMaxDuration," "]}):Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}})}),c.shop.shifts?c.shop.shifts.map((function(e){return Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsxs)("div",{children:[" Day: ",Z(e.day)]}),Object(L.jsxs)("div",{children:[e.openingTime," - ",e.closingTime]})]})})):""]}),Object(L.jsx)("div",{children:Object(L.jsx)($,{to:"/Lineup/"+c.shopId,content:"Enqueue"})})]}):Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}})]})},te=function(e){var t=Object(n.useState)({ttr:"",duration:"",shopId:parseInt(e.match.params.id)}),s=Object(l.a)(t,2),c=s[0],o=s[1],a=Object(E.f)(),i=function(e){var t=e.target,s=t.id,n=t.value;o((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},s,n))}))},r=function(){var e={timeToGetToTheShop:new Date(60*c.ttr*1e3),permanence:new Date(60*c.duration*1e3),shopid:c.shopId};y("QSW","/enqueue",e,{},(function(e){e.data.id?a.push("/Ticket/"+e.data.id):(e=Object(u.a)(Object(u.a)({},e),{},{data:"server was not ble to enqueue you (Lineup.js message, because response has no body)"}),f(e))}),null,null,!0,!1,!0)};return Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)(U,{goBack:!0,goHome:!0}),Object(L.jsxs)("div",{class:"tooltip",children:["Info",Object(L.jsxs)("span",{class:"tooltiptext",children:["This page is used to enqueue in a shop. ",Object(L.jsx)("br",{}),"You just need to indicate the time you'll need to reach the shop and the expected duration of you permanence inside the shop ",Object(L.jsx)("br",{}),"These two value will be used to position you in the queue correctly, to have a great expirience with our application please insert true values and respect them."]})]}),Object(L.jsxs)("form",{className:"flexColumnCenter card",id:"lineUp",onSubmit:function(e){e.preventDefault(),document.getElementById("lineUp").reportValidity()&&r()},autoComplete:"off",children:[Object(L.jsxs)("div",{className:"flexColumnCenter littleMargin",children:[Object(L.jsx)("label",{className:"bold",children:"Time to reach the shop (in minutes)"}),Object(L.jsx)("input",{className:"inputTextField",onChange:i,value:c.ttr,id:"ttr",type:"number",placeholder:"10",name:"ttr",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter littleMargin",children:[Object(L.jsx)("label",{className:"bold",children:"Duration of the permanence (in minutes)"}),Object(L.jsx)("input",{className:"inputTextField",onChange:i,value:c.duration,id:"duration",type:"number",placeholder:"15",name:"duration",required:!0})]}),Object(L.jsx)("div",{children:Object(L.jsx)("button",{type:"submit",children:"Lineup"})})]})]})},se=function(e){var t=Object(n.useState)({isLoadedTicket:!1,ticket:null,ticketId:e.match.params.id}),s=Object(l.a)(t,2),c=s[0],o=s[1],a=Object(E.f)();Object(n.useEffect)((function(){w("SSW","/ticketDetail/"+c.ticketId,{},(function(e){o((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedTicket:!0,ticket:e.data})}))}),null,null,!0,!1,!0)}),[c.ticketId]);return Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)(U,{goBack:!0,goHome:!0}),c.isLoadedTicket?Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsxs)("div",{class:"tooltip",children:["Info",Object(L.jsxs)("span",{class:"tooltiptext",children:["This is the page of a ticket. ",Object(L.jsx)("br",{}),"This page contains: ",Object(L.jsx)("br",{}),"- status: ticket status (also the color of the border is based on the status) ",Object(L.jsx)("br",{}),"- the time needed to reach the shop",Object(L.jsx)("br",{}),"- the duration of the permanence inside the shop",Object(L.jsx)("br",{}),"- enter time: if available the actual time the ticket was scanned to enter the shop",Object(L.jsx)("br",{}),"- exit time: if available the actual time the ticket was scanned to exit the shop",Object(L.jsx)("br",{}),"- start the starting time to scan the ticket to enter the shop",Object(L.jsx)("br",{}),"- expected end: the expected time you'll scan the ticket to exit the shop",Object(L.jsx)("br",{}),"- a button to check the shop this ticket is enqueued in",Object(L.jsx)("br",{}),"- a button to delete the ticket"]})]}),Object(L.jsxs)("div",{className:"bold yourTicketTitle",children:["TICKET (ID: ",c.ticket.id,")"]}),Object(L.jsxs)("div",{className:"flexColumnCenter card "+c.ticket.status,children:[Object(L.jsxs)("div",{children:[" ",Object(L.jsx)("div",{className:"bold",children:"Status "})," ",c.ticket.status," "]}),Object(L.jsxs)("div",{children:[" ",Object(L.jsx)("div",{className:"bold",children:"Time To Reach The Shop "})," ",_(c.ticket.timeToReachTheShop)," minutes "]}),Object(L.jsxs)("div",{children:[" ",Object(L.jsx)("div",{className:"bold",children:"Declared duration of the Permanence "})," ",_(c.ticket.expectedDuration)," minutes "]}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[c.ticket.enterTime?Object(L.jsxs)("div",{children:[" ",Object(L.jsx)("div",{className:"bold",children:"Enter Time "})," ",c.ticket.enterTime," "]}):"",c.ticket.exitTime?Object(L.jsxs)("div",{children:[" ",Object(L.jsx)("div",{className:"bold",children:"Exit Time "})," ",c.ticket.exitTime," "]}):"",c.ticket.scheduledEnteringTime?Object(L.jsxs)("div",{children:[" ",Object(L.jsx)("div",{className:"bold",children:"start "})," ",c.ticket.scheduledEnteringTime," "]}):"",c.ticket.scheduledExitingTime?Object(L.jsxs)("div",{children:[" ",Object(L.jsx)("div",{className:"bold",children:"expected end "})," ",c.ticket.scheduledExitingTime," "]}):""]})]}),Object(L.jsxs)("div",{className:"flexRowCenter",children:[Object(L.jsx)("button",{className:"smallButton",onClick:function(){a.push("/Shop/"+c.ticket.shop.id)},children:"Check shop"}),"or",Object(L.jsx)("button",{className:"smallButton",onClick:function(){w("QSW","/dequeue/"+c.ticketId,{},(function(){a.push("/Home")}),null,null,!0,!1,!0)},children:" Dequeue "})]})]}):Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}})]})},ne=function(e){var t=Object(E.f)();return Object(L.jsx)("div",{className:"flexColumnCenter card",children:Object(L.jsxs)("div",{className:"flexRowCenter",children:[Object(L.jsx)("div",{children:Object(L.jsx)("img",{className:"shopImg",src:K,alt:"Account"})}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsxs)("div",{className:"bold",children:[" ",e.shop.name," "]}),Object(L.jsx)("button",{className:"smallButton",onClick:function(){t.push("/ShopManager/"+e.shop.id)},children:"More info"}),Object(L.jsxs)("div",{children:[" ",e.shop.position," "]})]})]})})},ce=function(e){return e.isLoaded?Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("div",{className:"bold yourShopsTitle",children:"YOUR SHOPS:"}),Object(L.jsxs)("div",{class:"tooltip",children:["info",Object(L.jsxs)("span",{class:"tooltiptext",children:["In this section you can see all your shops ",Object(L.jsx)("br",{}),"For each shop you can see the following informations: ",Object(L.jsx)("br",{}),"- shop name ",Object(L.jsx)("br",{}),"- shop position ",Object(L.jsx)("br",{}),"- a button to go to the relative shop page"]})]}),null!==e.shops&&0!==e.shops.length?e.shops.map((function(e){return Object(L.jsx)(ne,{shop:e},e.id)})):"There are no shops."]}):Object(L.jsxs)("div",{className:"flexColumnCenter",children:[" ",Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}})]})},oe=function(){var e=Object(n.useState)({isLoadedShops:!1,isLoadedAccount:!1,account:null,shops:null}),t=Object(l.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){w("SSW","/shops",{},(function(e){c((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedShops:!0,shops:e.data})}))}),null,null,!0,!1,!0)}),[]),Object(n.useEffect)((function(){w("AMW","/userinfo",{},(function(e){c((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedAccount:!0,account:e.data})}))}),null,null,!0,!1,!0)}),[]),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)(H,{isLoaded:s.isLoadedAccount,account:s.account}),Object(L.jsxs)("div",{className:"flexRowCenter width80 topSpace",children:[Object(L.jsx)($,{to:"/TimeLine",content:"Time Line"}),Object(L.jsx)($,{to:"/NewShop",content:"New shop"})]}),Object(L.jsx)(ce,{isLoaded:s.isLoadedShops,shops:s.shops})]})},ae=function(){var e=Object(n.useState)({name:"",description:"",position:"",image:"no image",shopCapacity:1,timeslotMinutesDuration:3,maxEnteringClientInATimeslot:0,shiftsProto:[{day:0,openingTime:new Date,closingTime:new Date}]}),t=Object(l.a)(e,2),s=t[0],c=t[1],o=Object(E.f)(),a=function(e){var t=e.target,s=t.id,n=t.value;c((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},s,n))}))},i=function(){var e={name:s.name,description:s.description,position:s.position,shopCapacity:parseInt(s.shopCapacity),timeslotMinutesDuration:parseInt(s.timeslotMinutesDuration),maxEnteringClientInATimeslot:parseInt(s.shopCapacity),image:s.image,shiftsProto:s.shiftsProto};y("SSW","/newshop",e,{},(function(e){console.log("RESPOOOOOONSEEEE"),console.log(e),e?o.push("/ShopManager/"+e.data):(e=Object(u.a)(Object(u.a)({},e),{},{data:"server was not able to register a new shop"}),f(e))}),null,null,!0,!1,!0)};return Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)(U,{goBack:!0,goHome:!0}),Object(L.jsxs)("div",{class:"tooltip",children:["info",Object(L.jsxs)("span",{class:"tooltiptext",children:["This page consists of a form to create a new shop.",Object(L.jsx)("br",{}),'The "shop capacity" field represent the amount of persone that the store can host at the same time.',Object(L.jsx)("br",{}),'The "Duration of a time slot" field is one of the parameters used to calculate a queue. Usually 3 is a good value. To have more information please read the algorithm section of the DD document.']})]}),Object(L.jsxs)("form",{className:"card flexColumnCenter",id:"newShop",onSubmit:function(e){e.preventDefault(),document.getElementById("newShop").reportValidity()&&i()},autoComplete:"off",children:[Object(L.jsxs)("div",{className:"flexColumnCenter bold",children:[Object(L.jsx)("label",{children:"Shop name:"}),Object(L.jsx)("input",{className:"inputTextField",onChange:a,value:s.name,id:"name",type:"text",placeholder:"shop name",name:"name",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter bold",children:[Object(L.jsx)("label",{children:"Description:"}),Object(L.jsx)("input",{className:"inputTextField",onChange:a,value:s.description,id:"description",type:"text",placeholder:"This shop is...",name:"description",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter bold",children:[Object(L.jsx)("label",{children:"Position:"}),Object(L.jsx)("input",{className:"inputTextField",onChange:a,value:s.position,id:"position",type:"text",placeholder:"ShopStreet, 5, ShopCity",name:"position",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter bold",children:[Object(L.jsx)("label",{children:"Shop capacity:"}),Object(L.jsx)("input",{className:"inputTextField",onChange:a,value:s.shopCapacity,id:"shopCapacity",type:"number",placeholder:"max number of clients",name:"shopCapacity",required:!0})]}),Object(L.jsxs)("div",{className:"flexColumnCenter bold",children:[Object(L.jsx)("label",{children:"Duration of a time slot (in minutes):"}),Object(L.jsx)("input",{className:"inputTextField",onChange:a,value:s.timeslotMinutesDuration,id:"timeslotMinutesDuration",type:"number",placeholder:"3",name:"timeslotMinutesDuration",required:!0})]}),Object(L.jsx)("div",{children:Object(L.jsx)("button",{type:"submit",children:"Create Shop"})})]})]})},ie=function(e){return 0===e.tickets.lenght?Object(L.jsx)("div",{className:"flexColumnCenter",children:"No tickets"}):Object(L.jsx)("div",{className:"flexColumnCenter",children:e.tickets.map((function(e){return Object(L.jsx)("div",{className:"flexColumnCenter",children:Object(L.jsx)(W,{ticket:e,showShop:!1},e.id)},e.id)}))})},le=function(e){var t=Object(n.useState)({isLoadedShop:!1,shop:null,isLoadedQueueMaxDuration:!1,queueMaxDuration:null,shopId:e.match.params.id,queueTrigger:!1,tickets:null}),s=Object(l.a)(t,2),c=s[0],o=s[1];Object(n.useEffect)((function(){w("SSW","/shopDetail/"+c.shopId,{},(function(e){o((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedShop:!0,shop:e.data.shop,tickets:e.data.tickets})}))}),null,null,!0,!1,!0)}),[c.shopId]),Object(n.useEffect)((function(){w("QSW","/queueInfo/"+c.shopId,{},(function(e){o((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLoadedQueueMaxDuration:!0,queueMaxDuration:e.data})}))}),null,null,!0,!1,!0)}),[c.shopId]);return Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)(U,{goBack:!0,goHome:!0}),Object(L.jsxs)("div",{class:"tooltip",children:["info",Object(L.jsxs)("span",{class:"tooltiptext",children:["This is the page of a shop: ",Object(L.jsx)("br",{}),"In this page you can see the following informations:",Object(L.jsx)("br",{}),"-shop name",Object(L.jsx)("br",{}),"-shop description ",Object(L.jsx)("br",{}),"-shop position ",Object(L.jsx)("br",{}),"-button to show all the tickets of the shop ",Object(L.jsx)("br",{}),"-informations about the tickets (...) ",Object(L.jsx)("br",{}),'-the "scan ticket" button: this button is here to show what would happen if a customer scanned the ticket to enter or exit a shop']})]}),c.isLoadedShop?Object(L.jsxs)("div",{className:"flexColumnCenter card",children:[Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsxs)("div",{className:"bold",children:[" ",c.shop.name," "]}),Object(L.jsxs)("div",{children:[" description: ",c.shop.description," "]}),Object(L.jsxs)("div",{children:[" position: ",c.shop.position," "]})]}),Object(L.jsx)("div",{className:"flexColumnCenter",children:c.isLoadedQueueMaxDuration?Object(L.jsxs)("div",{className:"littleMargin",children:[" ",Object(L.jsx)("div",{className:"bold",children:" Expected Queue duration "})," ",c.queueMaxDuration," "]}):Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}})})]}):Object(L.jsx)(q.WaveLoading,{style:{position:"relative"}}),c.isLoadedShop?Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsxs)("button",{onClick:function(){o((function(e){return Object(u.a)(Object(u.a)({},e),{},{queueTrigger:!e.queueTrigger})}))},children:[c.queueTrigger?"Hide":"Show"," tickets"]}),c.queueTrigger?Object(L.jsx)(ie,{shopId:c.shopId,tickets:c.tickets}):""]}):""]})},re=function(e){var t=e.ticketTracker;return Object(L.jsxs)("div",{className:"flexColumnCenter cardWhite",children:[Object(L.jsxs)("div",{children:[" TICKET (ID: ",t.Ticket.id,") "]}),Object(L.jsxs)("div",{children:[" status ",t.Ticket.status]}),Object(L.jsxs)("div",{children:[" prev: ",t.previousMatchingTicket,", follow: ",t.followingMatchingTicket," "]})]})},de=function(e){var t=e.timeSlot;return Object(L.jsxs)("div",{className:"flexColumnCenter card",children:[Object(L.jsxs)("div",{className:"simpleTitle",children:[" TIME SLOT (ID: ",t.id,") "]}),Object(L.jsxs)("div",{children:[" from:  ",t.startingTime," ",Object(L.jsx)("br",{})," to: ",t.endingTime," "]}),Object(L.jsxs)("div",{className:"flexRowStart",children:[Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("div",{className:"simpleTitle",children:" EXPECTED ENTERING TICKETS "}),t.expectedEnteringTickets?t.expectedEnteringTickets.map((function(e){return Object(L.jsx)(re,{ticketTracker:e})})):""]}),Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)("div",{className:"simpleTitle",children:" EXPECTED EXITING TICKETS "}),t.expectedExitingTickets?t.expectedExitingTickets.map((function(e){return Object(L.jsx)(re,{ticketTracker:e})})):""]})]})]})},ue=function(e){var t=Object(n.useState)(null),s=Object(l.a)(t,2),c=s[0],o=s[1];return Object(L.jsxs)("div",{className:"flexColumnCenter",children:[Object(L.jsx)(F,{}),Object(L.jsxs)("div",{class:"tooltip",children:["info",Object(L.jsxs)("span",{class:"tooltiptext",children:["This page will not be available in any official release.",Object(L.jsx)("br",{}),'This page is useful for debugging, in fact, it allows you to paste the terminal output printed in JSON format from the "QSW" module. ',Object(L.jsx)("br",{}),"The JSON data represents the time line of the tickets in the queue and by pasting it in the textbox of this page, you'll be able to graphically visualize the time line and the arrangement of the tickets."]})]}),Object(L.jsxs)("div",{className:"flexColumnCenter card",children:[Object(L.jsx)("label",{className:"bold littleMargin",children:"Paste JSON here:"}),Object(L.jsx)("input",{className:"inputTextField ",onChange:function(e){o(JSON.parse(e.target.value))},type:"text"})]}),null!=c?Object(L.jsx)("div",{children:c.map((function(e){return Object(L.jsx)(de,{timeSlot:e},e.id)}))}):""]})};var je=function(){return Object(L.jsxs)(c.a.Fragment,{children:[Object(L.jsx)(i.a,{}),Object(L.jsx)(j.a,{children:Object(L.jsx)("div",{id:"App",className:"App",children:Object(L.jsxs)(E.c,{children:[Object(L.jsx)(E.a,{path:"/",exact:!0,component:D})," ",Object(L.jsx)(E.a,{path:"/Home",exact:!0,component:R})," ",Object(L.jsx)(E.a,{path:"/Search",exact:!0,component:J})," ",Object(L.jsx)(E.a,{path:"/Shops",exact:!0,component:X})," ",Object(L.jsx)(E.a,{path:"/Shop/:id",exact:!0,component:ee})," ",Object(L.jsx)(E.a,{path:"/Lineup/:id",exact:!0,component:te})," ",Object(L.jsx)(E.a,{path:"/Ticket/:id",exact:!0,component:se})," ",Object(L.jsx)(E.a,{path:"/HomeManager",exact:!0,component:oe})," ",Object(L.jsx)(E.a,{path:"/NewShop",exact:!0,component:ae})," ",Object(L.jsx)(E.a,{path:"/ShopManager/:id",exact:!0,component:le})," ",Object(L.jsx)(E.a,{path:"/TimeLine",exact:!0,component:ue})]})})})]})},he=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,172)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),o(e),a(e)}))};a.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(je,{})}),document.getElementById("root")),he()},72:function(e,t,s){},73:function(e,t,s){},75:function(e,t,s){},93:function(e,t,s){}},[[135,1,2]]]);
//# sourceMappingURL=main.bc682d1d.chunk.js.map